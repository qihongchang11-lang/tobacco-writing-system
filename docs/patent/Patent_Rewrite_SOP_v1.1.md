
# 发明专利高质量改写系统 — PRD & 数据规范（v1.1）
> 面向中国发明专利的“可直接落地的”SOP + 模板库  
> 角色：专利代理与撰写顾问（Patent Drafting Expert） + 专利数据与模板工程师（Patent Data Engineer）

---

## 0. 项目目标与范围
- **目标**：把“设备改进/生产工艺创新”的非结构化草稿，自动改写为**中国CNIPA合规**的四类材料：说明书、权利要求书、摘要（含摘要附图）、技术交底书；并生成**术语词典、部件号映射、权利要求层级树、质量/合规报告**。
- **范围**：输入归一化 → P/S/E抽取 → KTF分解 → 术语/标号/单位统一 → 权利要求生成 → 说明书生成 → 摘要与附图 → 交底书 → 一致性与合规检查 → 导出/版本管理。
- **合规基线**：遵循《专利审查指南（2023, 2024-01-20实施）》与实施细则的结构与格式要求（摘要≤300字、权利要求单句、结构章节齐备等）。

---

## 1. 顶层架构与质量门（Gates）
### 1.1 端到端流水线
1. 输入与归一化（OCR/分句/去噪/SI单位化）  
2. 领域识别与类型判定（装置/方法/用途/系统/组合）  
3. P/S/E 抽取（问题/方案/效果）  
4. KTF 分解器（关键技术特征 + 依赖DAG）  
5. 术语/标号标准化（词典、部件号、变量/单位）  
6. 参数与范围识别（区间/优选/更优选）  
7. 权利要求生成器（独立项最小充分集 + 从属层级）  
8. 说明书生成器（五章结构 + 附图说明 + 实施例）  
9. 摘要与摘要附图生成（≤300字 + 代表图）  
10. 技术交底书生成（内部表单）  
11. 一致性检查（术语/标号/图号/变量/单位）  
12. 合规检查（清楚性/支持性/单一性/禁词/单句/引用/区间逻辑/背景泄露）  
13. 图纸/流程图协同（编号/标注联动）  
14. 版本管理与导出（DOCX/LaTeX/PDF + 审稿批注）

### 1.2 Gates（质量门）
- **Gate‑A：KTF完整度 ≥90%**
- **Gate‑B：支持性 100%**（每个权利要求特征在实施例可追溯）
- **Gate‑C：一致性 0 缺陷**（术语/标号/图号/变量/单位）
- **Gate‑D：禁词=0**（营销/夸张/结果限定）
- **Gate‑E：摘要 ≤300字**（含标点；附图标记需括号）
- **Gate‑F：背景不泄露方案**

---

## 2. 数据模型（JSON Schema — 简化工程版）
```json
{
  "meta": {
    "title_cn": "string",
    "type": "device|method|use|system|product|combo",
    "ipc_candidates": ["string"],
    "applicant": "string",
    "inventors": ["string"],
    "project_id": "string",
    "created_at": "datetime",
    "updated_at": "datetime"
  },
  "dictionary": {
    "terms": [
      {"canonical": "string", "aliases": ["string"], "en": "string", "definition": "string"}
    ],
    "units": [{"symbol": "string", "si": true, "note": "string"}],
    "part_map": [{"code": "int", "name": "string", "note": "string"}],
    "variables": [{"symbol": "string", "meaning": "string", "unit": "string"}]
  },
  "pse_matrix": {
    "problems": ["string"],
    "solutions": [
      {
        "ktf_id": "string",
        "description": "string",
        "dependencies": ["string"],
        "parameters": [
          {
            "name": "string",
            "unit": "string",
            "type": "range|value|set",
            "range": {"min": "number", "max": "number"},
            "preferred": {"min": "number", "max": "number"},
            "values": ["number|string"]
          }
        ]
      }
    ],
    "effects": [
      {
        "linked_ktfs": ["string"],
        "effect": "string",
        "evidence": "string",
        "evidence_type": "test|calc|theory",
        "metric": {"name": "string", "delta": "string|number", "unit": "string"}
      }
    ]
  },
  "drawings": {
    "figs": [{"id": "int", "name": "string", "part_codes": ["int"], "file_ref": "string"}],
    "preferred_figure": "int"
  },
  "claims": {
    "root_type": "device|method|use|system|product",
    "independent": [{"id": "string", "text": "string", "type": "device|method"}],
    "dependents": [{"id": "string", "parent": "string", "text": "string", "level": "int"}],
    "alternatives": [{"claim_id": "string", "feature": "string", "equivalents": ["string"]}]
  },
  "specification": {
    "technical_field": "string",
    "background": "string",
    "summary": {"problem": "string", "solution": "string", "effects": ["string"]},
    "drawings_brief": [{"fig": "int", "caption": "string", "parts": ["int"]}],
    "embodiments": [
      {
        "name": "string",
        "structure_or_steps": "string",
        "parameters": [{"name": "string", "value": "string|number", "unit": "string"}],
        "operation": "string",
        "comparative_example": "string",
        "test_data_ref": "string"
      }
    ]
  },
  "abstract": {"text": "string", "preferred_figure": "int"},
  "quality_checks": {
    "clarity": ["string"],
    "support": ["string"],
    "unity": ["string"],
    "consistency": ["string"],
    "banned_words": ["string"],
    "background_leakage": ["string"]
  }
}
```

---

## 3. 说明书（Specification）高质量改写 SOP
### 3.1 结构与约束
- **章节顺序**：技术领域 → 背景技术 → 发明内容（问题/方案/效果） → 附图说明 → 具体实施方式（强制）。
- **一致性**：术语/部件名/变量/单位与权利要求、图纸一一对应。

### 3.2 分步操作
1. **技术领域（≤3句）**：不泄露方案。  
2. **背景技术（400–800字）**：客观列举现有方案与缺陷；可引证公开文献；严禁披露本案方案。  
3. **发明内容**：  
   - **要解决的技术问题**：量化目标；  
   - **技术方案**：按独立项要素顺序；仅写结构/步骤/关系/关键参数；  
   - **有益效果**：与KTF→Effect映射一致，尽量量化；  
4. **附图说明**：逐图简述，列部件号；相同部件号全文一致；  
5. **具体实施方式**：  
   - 装置：组成→连接→原理→参数（区间/优选/更优选）；  
   - 方法：S1/S2/S3，写明温度/压力/时间/转速/配比等；  
   - 可选对比例与数据。

### 3.3 生成提示词（LLM）
- 生成领域/背景：要求**不泄露**方案；允许简要引证。  
- 生成发明内容：按独立项顺序；效果可回指数据。  
- 生成实施例与附图说明：参数窗口分层，图号/部件号联动。

### 3.4 DoD
- 结构齐备；背景无泄露；必要KTF在实施例有支持；效果可回指；一致性0缺陷；追溯表完整（特征→段落/图号）。

---

## 4. 权利要求书（Claims）高质量改写 SOP
### 4.1 规则与约束
- **单句**：每项仅末尾句号；编号用阿拉伯数字；术语与说明书一致。
- **独立项**：仅含**必要技术特征**的最小充分集；  
- **从属项**：每条仅加**一项限定**（材料/参数/结构/控制/环境/等同）。

### 4.2 构造步骤
1. 选择主权利要求类型（装置/方法/并列主项）。  
2. 由 KTF_DAG 选取最小充分集，形成**独立项**；  
3. 围绕独立项生成**从属层级**（≥8–12条）：  
   - 材料/部件细化；参数区间→优选→更优选；结构关系；控制/逻辑；环境工况；等同替换；  
4. 形成**特征↔实施例段落/图号**映射表；  
5. 形式校验（单句/引用/禁词/区间关系/支持性/一致性）。

### 4.3 句式骨架
- **装置主项**：  
  `一种___装置，其特征在于，包括：A___；B___与A___连接，用于___；其中，___参数为___。`
- **方法主项**：  
  `一种___方法，其特征在于，包括步骤：S1___；S2___；S3___；其中，___条件为___。`

### 4.4 DoD
- 主项可独立实现并覆盖核心方案；从属形成层级保护网；形式/用词合规；追溯完整。

---

## 5. 摘要与摘要附图（Abstract）SOP
### 5.1 要求
- 文字≤**300字**；包含**领域+对象+1–2核心特征+主要用途/效果**；去除宣传词；摘要中附图标记**用括号**；摘要附图缩小至**4×6cm**仍清晰。

### 5.2 模板
```
本发明涉及____领域，公开了一种____。该____包括____与____，二者____以在____条件下实现____，从而使____指标达到____。本发明适用于____场景。（附图标记以括号标注）
```

### 5.3 DoD
- 字数合规；四要素齐全；标记加括号；建议摘要附图=图X（覆盖核心关系/流程主干）。

---

## 6. 技术交底书（内部）SOP
### 6.1 表单字段
1) 基本信息；2) 现有技术与缺陷（3–5条）；3) **KTF清单**与依赖；4) 参数窗口（区间/优选/更优选）；5) 实施例；6) 实验/对比数据；7) 等同/备选方案；8) 预期权利要求布局（主/从树）；9) 风险与规避；10) 关联专利/产品/标准。

### 6.2 DoD
- 字段全填（可“无/待补”）；与 claims 预布局一致；数据/图可追溯。

---

## 7. 校验器与规则（可编码）
- **单句性**：权利要求句号计数=1；限制分号/并列句。  
- **引用合法**：从属项需引用父项且引用链无环。  
- **必要特征**：若某特征对效果“必需”，独立项不可遗漏。  
- **支持性**：每个 claim 特征在实施例中存在明确支持。  
- **一致性**：术语/部件号/图号/变量/单位一致；相同部件号在不同图一致。  
- **区间逻辑**：更优选 ⊂ 优选 ⊂ 区间；单位一致。  
- **禁词**：领先/最佳/世界第一/革命性/超强/极致/无与伦比/显著（无证）等。  
- **背景泄露**：背景与方案关键词重合率 < 阈值，否则触发人工审阅。  
- **摘要字数与括号**：≤300字，附图标记以括号标注。

---

## 8. 模板库（可直接套用）
### 8.1 说明书骨架
```
【发明名称】____
【技术领域】本发明涉及____领域，具体涉及一种____。
【背景技术】目前____通常采用____，但存在____等问题……（可引证公开文献）
【发明内容】
  【要解决的技术问题】____。
  【技术方案】一种____，包括：A____；B____与A____连接，用于____；其中，____。
  【有益效果】与现有技术相比，本发明____，实现____（可量化）。
【附图说明】图1为____示意图；其中，1-____，2-____，3-____。
【具体实施方式】实施例1：结构/步骤____；参数（区间/优选/更优选）____；运行/控制____；对比与数据（可选）____。
```

### 8.2 权利要求（装置/方法）
```
1. 一种____装置，其特征在于，包括：A____；B____与A____连接，用于____；其中，____的参数为____。
2. 根据权利要求1所述的装置，其特征在于，____的材料为____。
3. 根据权利要求1或2所述的装置，其特征在于，____的尺寸范围为____，优选为____。
…
```
```
1. 一种____方法，其特征在于，包括步骤：S1____；S2____；S3____；其中，____条件为____。
2. 根据权利要求1所述的方法，其特征在于，步骤S__中____的参数范围为____，优选为____。
…
```

### 8.3 摘要（≤300字）
```
本发明涉及____领域，公开了一种____。该____包括____与____，二者____以在____条件下实现____，从而使____指标达到____。本发明适用于____场景。（附图标记以括号标注）
```

### 8.4 交底书字段清单
- 现有技术与缺陷（3–5条，含引证）  
- KTF清单与依赖  
- 参数窗口（区间/优选/更优选）  
- 实施例1..n（结构/步骤/材料/控制/边界）  
- 对比实验与数据  
- 等同/备选方案  
- 预期权利要求布局（主/从树）  
- 风险点与规避  
- 关联专利/产品/标准

---

## 9. 提示词包（精简可调用）
- **Claims 主项（装置/方法）**：读取 KTF_DAG→最小充分集→单句主项；随后生成6类从属项（材料/参数/结构/控制/环境/等同；每条单一限定；区间→优选→更优选）；输出追溯表。  
- **Spec 发明内容**：按“问题→方案→效果”；方案遵循主项特征顺序；效果量化并可回指。  
- **Abstract**：≤300字；包含“领域+对象+核心特征（≤2）+主要用途/效果”；标记加括号；输出摘要附图编号与理由。

---

## 10. 验收标准（DoD）
- **说明书**：结构齐全；背景无泄露；实施例可执行；效果可回指；一致性0缺陷。  
- **权利要求**：主项可落地；从属≥8–12条、层级化覆盖；单句/引用合法；必要特征齐备并可追溯。  
- **摘要**：≤300字；四要素齐全；括号标注；摘要附图清晰。  
- **交底书**：表单字段完备；与 claims 预布局一致；数据/图可追溯。

---

## 11. 路线图（原型两周）
- D1–3：归一化、P/S/E、术语/标号词典、KTF_DAG  
- D4–7：Claims‑Gen + 合规校验器（单句/引用/禁词/区间/支持性）  
- D8–10：Spec/Abstract/Disclosure 生成 + 图/标号联动  
- D11–14：Gates 面板、导出（DOCX/LaTeX/PDF）、版本树与审稿批注
