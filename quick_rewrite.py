#!/usr/bin/env python3
"""
å¿«é€Ÿæ”¹å†™å·¥å…· - å‘½ä»¤è¡Œç‰ˆæœ¬
æ— éœ€å¤æ‚é…ç½®ï¼Œç›´æ¥å¤„ç†æ–‡ç« 
"""

import sys
import os
from pathlib import Path

def quick_rewrite():
    """å¿«é€Ÿæ”¹å†™å…¥å£"""
    
    print("ğŸ¯ ä¸­å›½çƒŸè‰æŠ¥é£æ ¼å¿«é€Ÿæ”¹å†™å·¥å…·")
    print("="*50)
    
    # æ£€æŸ¥å‚æ•°
    if len(sys.argv) < 2:
        print("ä½¿ç”¨æ–¹æ³•ï¼š")
        print(f"  python {sys.argv[0]} 'ä½ çš„æ–‡ç« å†…å®¹'")
        print(f"  python {sys.argv[0]} --file æ–‡ç« æ–‡ä»¶.txt")
        print()
        print("ç¤ºä¾‹ï¼š")
        print(f"  python {sys.argv[0]} 'æŸå¸‚çƒŸè‰å±€æœ€è¿‘åœ¨æ•°å­—åŒ–å»ºè®¾æ–¹é¢...'")
        return
    
    # è·å–æ–‡ç« å†…å®¹
    if sys.argv[1] == '--file':
        if len(sys.argv) < 3:
            print("âŒ è¯·æŒ‡å®šæ–‡ä»¶è·¯å¾„")
            return
        
        file_path = sys.argv[2]
        if not os.path.exists(file_path):
            print(f"âŒ æ–‡ä»¶ä¸å­˜åœ¨: {file_path}")
            return
            
        with open(file_path, 'r', encoding='utf-8') as f:
            article_content = f.read()
    else:
        article_content = sys.argv[1]
    
    if not article_content.strip():
        print("âŒ æ–‡ç« å†…å®¹ä¸ºç©º")
        return
    
    # ç”Ÿæˆæ”¹å†™æç¤º
    prompt = f"""ä½ æ˜¯ä¸­å›½çƒŸè‰æŠ¥çš„èµ„æ·±ç¼–è¾‘ï¼Œè¯·å°†ä»¥ä¸‹æ–‡ç« æ”¹å†™ä¸ºç¬¦åˆçƒŸè‰æŠ¥é£æ ¼çš„ä¸“ä¸šç¨¿ä»¶ã€‚

æ”¹å†™è¦æ±‚ï¼š
1. ä½“è£è¯†åˆ«ï¼šåˆ¤æ–­æ˜¯æ¶ˆæ¯ã€é€šè®¯ã€è¿˜æ˜¯ç»éªŒææ–™
2. ç»“æ„ä¼˜åŒ–ï¼šæ ‡é¢˜(15-25å­—) + å¯¼è¯­(40-60å­—) + ä¸‰æ®µå¼æ­£æ–‡
3. é£æ ¼è½¬æ¢ï¼šæ­£å¼ã€å®¢è§‚ã€æƒå¨çš„è¯­è¨€é£æ ¼
4. è§„èŒƒæ ¡å¯¹ï¼šæœ¯è¯­ã€æ•°å­—ã€æ—¥æœŸã€æœºæ„åç§°è§„èŒƒåŒ–

ä¸­å›½çƒŸè‰æŠ¥é£æ ¼ç‰¹å¾ï¼š
- è¯­è¨€ï¼šæ­£å¼ã€å®¢è§‚ã€ç®€æ´æœ‰åŠ›
- æ ‡é¢˜ï¼š"{"{ä¸»ä½“}+{åŠ¨ä½œ}+{æˆæœ}"}" æ ¼å¼
- å¯¼è¯­ï¼šåŒ…å«æ—¶é—´ã€åœ°ç‚¹ã€ä¸»ä½“ã€åŠ¨ä½œã€æˆæ•ˆ
- ç”¨è¯ï¼šä½¿ç”¨"æ‰å®æ¨è¿›""æˆæ•ˆæ˜¾è‘—""æŒç»­æ·±åŒ–"ç­‰è§„èŒƒè¡¨è¾¾
- é¿å…ï¼šå¤¸å¼ è¯æ±‡(éœ‡æ’¼ã€æƒŠäºº)ã€å£è¯­åŒ–è¡¨è¾¾(ç»™åŠ›ã€è¶…èµ)
- æ•°å­—ï¼šä¸‡ä»¥ä¸Šç”¨é˜¿æ‹‰ä¼¯æ•°å­—ï¼Œå¦‚"3.2ä¸‡""15.6%""1.5äº¿å…ƒ"
- æœºæ„ï¼šé¦–æ¬¡ä½¿ç”¨å…¨ç§°"XXçœçƒŸè‰ä¸“å–å±€ï¼ˆå…¬å¸ï¼‰"

è¯·å¤„ç†ä»¥ä¸‹æ–‡ç« ï¼š

{article_content}

æœŸæœ›è¾“å‡ºæ ¼å¼ï¼š

### ğŸ“‹ æ”¹å†™åˆ†æ
**åŸæ–‡ä½“è£**ï¼š[æ¶ˆæ¯/é€šè®¯/ç»éªŒææ–™]
**ä¸»è¦è°ƒæ•´**ï¼š[åˆ—å‡º3-5ä¸ªä¸»è¦ä¿®æ”¹ç‚¹]

### ğŸ“ æ”¹å†™ç»“æœ

---
**[æ”¹å†™åçš„æ ‡é¢˜]**

[æ”¹å†™åçš„å¯¼è¯­æ®µè½]

[æ”¹å†™åçš„æ­£æ–‡ç¬¬1æ®µ]

[æ”¹å†™åçš„æ­£æ–‡ç¬¬2æ®µ] 

[æ”¹å†™åçš„æ­£æ–‡ç¬¬3æ®µ]
---

### ğŸ“Š æ”¹å†™è¯´æ˜
| ä½ç½® | åŸè¡¨è¾¾ | æ–°è¡¨è¾¾ | ä¿®æ”¹ç†ç”± |
|------|--------|--------|----------|

**å­—æ•°ç»Ÿè®¡**ï¼šæ”¹å†™åxxxå­—
**ç¬¦åˆæ€§è¯„ä¼°**ï¼šç»“æ„âœ… ç”¨è¯âœ… æ ¼å¼âœ…"""
    
    # è¾“å‡ºæç¤ºè¯
    print("ğŸ“‹ å·²ç”Ÿæˆæ”¹å†™æç¤ºè¯ï¼Œè¯·å¤åˆ¶ä»¥ä¸‹å†…å®¹åˆ°Claudeä¸­ï¼š")
    print("="*50)
    print(prompt)
    print("="*50)
    
    # ä¿å­˜åˆ°æ–‡ä»¶
    output_file = "rewrite_prompt.txt"
    with open(output_file, 'w', encoding='utf-8') as f:
        f.write(prompt)
    
    print(f"ğŸ“ æç¤ºè¯å·²ä¿å­˜åˆ°: {output_file}")
    print("ğŸ’¡ å¤åˆ¶è¯¥å†…å®¹åˆ°Claudeå¯¹è¯ä¸­å³å¯è·å¾—æ”¹å†™ç»“æœ")

if __name__ == "__main__":
    quick_rewrite()